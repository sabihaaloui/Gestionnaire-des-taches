<div class="container">
  <h1>ğŸ—“ï¸ Gestionnaire de TÃ¢ches</h1>

  <input [(ngModel)]="title" type="text" placeholder="Titre de la tÃ¢che" />
  <textarea [(ngModel)]="desc" placeholder="Description de la tÃ¢che"></textarea>
  <label for="start">Date de dÃ©but :</label>
  <input type="date" [(ngModel)]="start" />
  <label for="end">Date de fin :</label>
  <input type="date" [(ngModel)]="end" />

  <button (click)="addOrUpdateTask()">ğŸ’¾ Enregistrer</button>

  <hr />
  <h2>ğŸ“‹ Mes tÃ¢ches</h2>
  <div *ngIf="tasks.length === 0">Aucune tÃ¢che disponible.</div>
  <div *ngFor="let task of tasks" class="task">
    <strong>{{ task.title }}</strong><br />
    ğŸ—“ï¸ Du {{ task.start }} au {{ task.end }}
    <div class="task-actions">
      <button (click)="toggleInlineDetails(task.id)">Afficher dÃ©tails internes</button>
      <button (click)="showDetails(task)">Afficher dÃ©tails (popup)</button>
      <button (click)="editTask(task)">Modifier</button>
      <button (click)="deleteTask(task.id)">Supprimer</button>
    </div>
    <div
      *ngIf="activeDetailsId === task.id"
      style="margin-top: 10px; background: #fff; padding: 10px; border-radius: 6px;"
    >
      <p><strong>Description:</strong> {{ task.desc || 'Aucune description' }}</p>
      <p><strong>Date de dÃ©but:</strong> {{ task.start }}</p>
      <p><strong>Date de fin:</strong> {{ task.end }}</p>
    </div>
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" id="detailsModal" class="modal">
    <div id="detailsModalContent" class="modal-content">
      <h2>DÃ©tails de la tÃ¢che</h2>
      <p><strong>Titre :</strong> {{ modalTask?.title }}</p>
      <p><strong>Description :</strong> {{ modalTask?.desc }}</p>
      <p><strong>Date de dÃ©but :</strong> {{ modalTask?.start }}</p>
      <p><strong>Date de fin :</strong> {{ modalTask?.end }}</p>
      <button (click)="closeDetails()">Fermer</button>
    </div>
  </div>
</div>
